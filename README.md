
chenxiaolei8 create 2017/05/08

框架分为读管理器、双端缓冲队列和写管理器。读写管理器分别持有读写线程池，双端缓冲队列负责读写线程的数据交换

插件包括三种 预处理（验证、分割） 读或写 后处理（也就校验吧 目前没想好 但是留出来了）
目前最重要的 就是解耦合 读配置啊  增加插件不修改代码 反射之类的
Reader和Writer线程与双端缓冲队列交换数据引入缓冲避免交换次数
任务配置读取，启动读机制、启动写机制和启动循环监控
比如那读来说 预处理 分片阶段  线程池启动阶段
预处理 这个吧 比如mysql 处理总行数啊 是否能连接
分片  如果是hive，则与表在hdfs的根目录下的非目录文件有关。如果是mysql则和数据库行数有关
写机制的过程类似，也分为预处理 分片阶段 线程池启动
比如 预处理阶段 遍历数据传输目的地 清理目标表数据：如果是全量传输则清空目标表，增量则清空目标表增量

双端缓冲队列类 读用一个队列 写用一个队列 读用读锁 写和交换队列用写锁 只有读队列为空且写队列不为空才进行交换

DTS的不足
1 没解耦
2 数据流向 线性等待
3 job配置固定化 新增流向必须新建新的配置类
